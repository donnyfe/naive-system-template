import{h as p}from"./index-DqO_OEbo.js";import{k as $,ah as j,a0 as B,r as c,c as M,e as q,Z as O,X as S,Q as t,_ as o,U as l,j as k}from"./vue-vendor-Zc8KthId.js";import{n as V,W as r,m as _,a3 as F,j as I,V as L,B as Q,f as W}from"./ui-vendor-D13i6_Ys.js";function E(n){return p.get("/api/role/list",{...n})}function X(n){return p.post("/api/role",n)}function Z(n){return p.patch(`/api/role/${n.id}`,n)}function G(n){return p.delete(`/api/role/${n}`)}const H=$({__name:"edit-role-modal",props:{visible:{},visibleModifiers:{}},emits:j(["success"],["update:visible"]),setup(n,{expose:x,emit:h}){const i=B(n,"visible"),y=h,g=c(),m=c(!1),u=c("add"),U=M(()=>u.value==="add"?"新增角色":"编辑角色"),f={id:void 0,code:"",name:"",remark:"",sort:0,status:1},a=q({...f}),w={code:[{required:!0,message:"请输入角色编码"},{min:2,max:30,message:"长度在2-30个字符"}],name:[{required:!0,message:"请输入角色名称"},{min:2,max:30,message:"长度在2-30个字符"}]};function C(d,e){u.value=d,d==="edit"&&e?Object.assign(a,e):Object.assign(a,f),i.value=!0}async function N(){await g.value?.validate(),m.value=!0;try{u.value==="add"?await X(a):await Z({...a}),$message.success(`${u.value==="add"?"新增":"编辑"}成功`),y("success"),v()}catch{$message.error(`${u.value==="add"?"新增":"编辑"}失败`)}finally{m.value=!1}}function v(){i.value=!1,Object.assign(a,f)}return x({openModal:C}),(d,e)=>{const b=Q,R=W;return S(),O(t(V),{value:i.value,"onUpdate:value":e[5]||(e[5]=s=>i.value=s),title:t(U),preset:"dialog","show-icon":!1,onClose:v},{action:o(()=>[l(R,null,{default:o(()=>[l(b,{onClick:v},{default:o(()=>e[6]||(e[6]=[k("取消")])),_:1}),l(b,{type:"primary",loading:m.value,onClick:N},{default:o(()=>e[7]||(e[7]=[k(" 确定 ")])),_:1},8,["loading"])]),_:1})]),default:o(()=>[l(t(L),{ref_key:"formRef",ref:g,model:a,rules:w,"label-placement":"left","label-width":"100","require-mark-placement":"right-hanging"},{default:o(()=>[l(t(r),{label:"角色编码",path:"code"},{default:o(()=>[l(t(_),{value:a.code,"onUpdate:value":e[0]||(e[0]=s=>a.code=s),placeholder:"请输入角色编码"},null,8,["value"])]),_:1}),l(t(r),{label:"角色名称",path:"name"},{default:o(()=>[l(t(_),{value:a.name,"onUpdate:value":e[1]||(e[1]=s=>a.name=s),placeholder:"请输入角色名称"},null,8,["value"])]),_:1}),l(t(r),{label:"排序",path:"sort"},{default:o(()=>[l(t(F),{value:a.sort,"onUpdate:value":e[2]||(e[2]=s=>a.sort=s),placeholder:"请输入排序"},null,8,["value"])]),_:1}),l(t(r),{label:"状态",path:"status"},{default:o(()=>[l(t(I),{value:a.status,"onUpdate:value":e[3]||(e[3]=s=>a.status=s),options:[{label:"启用",value:1},{label:"禁用",value:0}],placeholder:"请选择状态"},null,8,["value"])]),_:1}),l(t(r),{label:"备注",path:"remark"},{default:o(()=>[l(t(_),{value:a.remark,"onUpdate:value":e[4]||(e[4]=s=>a.remark=s),type:"textarea",placeholder:"请输入备注"},null,8,["value"])]),_:1})]),_:1},8,["model"])]),_:1},8,["value","title"])}}});export{H as _,G as d,E as g};
