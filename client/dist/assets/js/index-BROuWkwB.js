import{a4 as Y,P as G,f as b,L as J,V as K,b as E,W as X,m as ee,B as h,a2 as ne,T as te,Q as oe}from"./ui-vendor-D13i6_Ys.js";import{k as S,r as _,Z as V,a3 as T,X as g,Q as a,O as P,E as j,W as z,Y as p,ah as ae,a0 as se,ai as le,U as e,l as re,I as ie,_ as o,j as f,$,o as ce,R as ue}from"./vue-vendor-Zc8KthId.js";import{c as _e,e as pe,f as me,g as de}from"./index-DqO_OEbo.js";import{q as fe,r as ge}from"./api-9ESawQ3Y.js";import{_ as ve}from"./edit-user-modal.vue_vue_type_script_setup_true_lang-DkPcfuME.js";import"./utils-vendor-lGwZSMVs.js";const ye=S({__name:"pagination",props:{count:{type:Number,default:0}},emits:["change"],setup(s,{emit:l}){const i=s,k=l,u=_(1),c=_(10),m=["size-picker","pages"];function r(){k("change",u.value,c.value)}return(U,d)=>{const v=Y;return i.count>0?(g(),V(v,{key:0,page:a(u),"onUpdate:page":d[0]||(d[0]=y=>P(u)?u.value=y:null),"page-size":a(c),"onUpdate:pageSize":d[1]||(d[1]=y=>P(c)?c.value=y:null),"page-sizes":[10,20,30,50],"item-count":i.count,"display-order":m,"show-size-picker":"",onUpdatePage:r,onUpdatePageSize:r},null,8,["page","page-size","item-count"])):T("",!0)}}}),he={style:{display:"inline-block"},viewBox:"0 0 48 48",width:"1.2em",height:"1.2em"};function ke(s,l){return g(),z("svg",he,l[0]||(l[0]=[p("g",{fill:"none",stroke:"currentColor","stroke-linejoin":"round","stroke-width":"4"},[p("path",{d:"M24 44c11.046 0 20-8.954 20-20S35.046 4 24 4S4 12.954 4 24s8.954 20 20 20Z"}),p("path",{"stroke-linecap":"round",d:"M24 16v16m-8-8h16"})],-1)]))}const xe=j({name:"icon-park-outline-add-one",render:ke}),$e={style:{display:"inline-block"},viewBox:"0 0 48 48",width:"1.2em",height:"1.2em"};function ze(s,l){return g(),z("svg",$e,l[0]||(l[0]=[p("g",{fill:"none",stroke:"currentColor","stroke-linejoin":"round","stroke-width":"4"},[p("path",{"stroke-linecap":"round",d:"M13 12.432v-4.62A2.813 2.813 0 0 1 15.813 5h24.374A2.813 2.813 0 0 1 43 7.813v24.375A2.813 2.813 0 0 1 40.188 35h-4.672"}),p("path",{d:"M32.188 13H7.811A2.813 2.813 0 0 0 5 15.813v24.374A2.813 2.813 0 0 0 7.813 43h24.375A2.813 2.813 0 0 0 35 40.188V15.811A2.813 2.813 0 0 0 32.188 13Z"})],-1)]))}const Ce=j({name:"icon-park-outline-copy",render:ze}),we={key:0,class:"inline-flex items-center gap-0.5em"},Me={class:"cursor-pointer"},L=S({__name:"copy-text",props:ae({maxLength:{}},{value:{},valueModifiers:{}}),emits:["update:value"],setup(s){const l=s,i=se(s,"value");return(k,u)=>{const c=G,m=Ce,r=le("copy");return i.value?(g(),z("div",we,[e(c,{style:ie({"max-width":l.maxLength||"12em"})},{default:o(()=>[f($(i.value),1)]),_:1},8,["style"]),re((g(),z("span",Me,[e(m)])),[[r,i.value]])])):T("",!0)}}});var D=(s=>(s[s.男=0]="男",s[s.女=1]="女",s))(D||{});const be={class:"flex gap-4"},Pe=S({__name:"index",setup(s){const l=_e(),{userInfo:i}=l,{bool:k,setTrue:u,setFalse:c}=pe(!1),m={username:""},r=_({...m});function U(){r.value={...m}}const d=_(),v=_();async function y(n){const{success:t}=await ge(n);t&&($message.success("删除成功"),x())}const q=[{key:"username",title:"姓名",align:"center"},{key:"sex",title:"性别",align:"center",render:n=>{const t={0:"primary",1:"success"};if(n.sex)return e(te,{type:t[n.sex]},{default:()=>[D[n.sex]]})}},{key:"phone",title:"联系方式",align:"center",render:n=>e(L,{value:n.phone},null)},{key:"email",title:"邮箱",align:"center",render:n=>e(L,{value:n.email},null)},{key:"actions",title:"操作",align:"center",render:n=>{const t=n.id===i.id;return e(b,{justify:"center"},{default:()=>[e(h,{size:"small",onClick:()=>v.value.openModal("edit",n)},{default:()=>[f("编辑")]}),!t&&e(oe,{onPositiveClick:()=>y(n.id)},{default:()=>"确认删除",trigger:()=>e(h,{size:"small",type:"error"},{default:()=>[f("删除")]})})]})}}],B=_(0),N=_([]);async function x(){u();const n={...ue(r.value),pageNumber:1,pageSize:10};try{const{data:t}=await fe(n),{list:C,count:w}=t;N.value=C,B.value=w}catch(t){console.error(t)}finally{c()}}ce(()=>{x()});function F(n,t){$message.success(`分页器:${n},${t}`)}return(n,t)=>{const C=ee,w=X,Z=me,I=de,M=E,O=K,R=J,Q=xe,W=ne,H=ye;return g(),V(M,null,{default:o(()=>[e(a(b),{vertical:"",class:"flex-1"},{default:o(()=>[e(R,null,{default:o(()=>[e(O,{ref_key:"formRef",ref:d,model:a(r),"label-placement":"left",inline:"","show-feedback":!1},{default:o(()=>[e(M,null,{default:o(()=>[e(w,{label:"用户名",path:"username"},{default:o(()=>[e(C,{value:a(r).username,"onUpdate:value":t[0]||(t[0]=A=>a(r).username=A),placeholder:"请输入"},null,8,["value"])]),_:1}),e(M,{class:"ml-auto"},{default:o(()=>[e(a(h),{type:"primary",onClick:x},{icon:o(()=>[e(Z)]),default:o(()=>[f(" "+$(n.$t("common.search")),1)]),_:1}),e(a(h),{strong:"",secondary:"",onClick:U},{icon:o(()=>[e(I)]),default:o(()=>[f(" "+$(n.$t("common.reset")),1)]),_:1})]),_:1})]),_:1})]),_:1},8,["model"])]),_:1}),e(R,{class:"flex-1"},{default:o(()=>[e(a(b),{vertical:"",size:"large"},{default:o(()=>[p("div",be,[e(a(h),{type:"primary",onClick:t[1]||(t[1]=A=>a(v).openModal("add"))},{icon:o(()=>[e(Q)]),default:o(()=>[f(" "+$(n.$t("users.createUser")),1)]),_:1})]),e(W,{columns:q,data:a(N),loading:a(k)},null,8,["data","loading"]),e(H,{count:a(B),onChange:F},null,8,["count"]),e(ve,{ref_key:"modalRef",ref:v,title:"用户",onClose:x},null,512)]),_:1})]),_:1})]),_:1})]),_:1})}}});export{Pe as default};
