import{k as D,c as v,o as R,r as b,W as x,X as _,H as g,Q as a,Y as r,U as e,_ as t,$ as h,j as y,O as G,a3 as Q,A as H,F as W,a4 as X,Z as S}from"./vue-vendor-Zc8KthId.js";import{u as Y}from"./chat-DfSn68VW.js";import{C as Z}from"./ChatbubblesOutline-DW6Z8fY4.js";import{F as J,G as K,N as ee,B as te,m as ae,S as se,l as oe,P as ne,Q as re,_ as le}from"./ui-vendor-D13i6_Ys.js";import{M as ie,C as ce,T as de}from"./MenuFoldOutlined-BlNiundU.js";import{S as ue}from"./Search-ByXbnNmZ.js";import{C as pe,E as fe}from"./EditOutlined-DLIgbPlx.js";import{C as _e,a as T}from"./CloseOutline-CVAvdo38.js";import{b as he}from"./index-DqO_OEbo.js";import"./utils-vendor-lGwZSMVs.js";const me={class:"slidebar-content w-240px px-3 h-full flex flex-col bg-white/90 dark:bg-dark/90 backdrop-blur-xl border-r border-gray-100/50 dark:border-gray-800/50 transition-all duration-300 ease-out"},ve={class:"flex-none h-16 flex items-center justify-between backdrop-blur-sm border-b border-gray-100/50 dark:border-gray-800/50"},xe={class:"flex items-center gap-2.5 text-gray-800 dark:text-gray-100"},ge={class:"text-[16px] font-medium tracking-wide"},ye={class:"w-full py-2 flex items-center gap-2 overflow-hidden"},Ce={key:0,class:"flex flex-col items-center justify-center h-[calc(100vh-350px)]"},be={class:"text-5xl text-gray-300 mb-2"},ke={class:"flex flex-col gap-2"},we={class:"flex gap-1.5 mr-1"},Ne={class:"flex items-center gap-3 flex-1 min-w-0"},Se={class:"flex-1 w-60%"},Te={class:"flex-none flex justify-end gap-1.5 opacity-0 group-hover:opacity-100 transition-all duration-300"},ze={class:"flex-none py-3 border-t border-gray-100/50 dark:border-gray-800/50"},Fe=D({__name:"sidebar",setup(Le){const z=J(),k=K(),l=Y(),F=v(()=>l.showSidebar),C=v(()=>l.chatList);R(async()=>{l.queryChatList()});function L(){l.showSidebar=!1}function O(){const s={chatName:"新建对话"};l.createChat(s)}async function $({chatId:s}){N(s)||await l.setActive(s)}function w(s,c,n){if(n?.stopPropagation(),s.isEdit=c,!c){const{chatId:i,chatName:m}=s;l.updateChat({chatId:i,chatName:m})}}function B(s,c){c?.stopPropagation(),l.removeChat(s.chatId)}function N(s){return l.activeId===s}function I(){if(!l.chatList.length){k.warning("当前没有对话");return}z.warning({title:"清空",content:"您确定要清空对话吗",positiveText:"确定",negativeText:"取消",onPositiveClick:()=>{l.clearChatList().then(()=>{k.success("清空成功")})}})}const u=v(()=>({enter:"transition-all duration-300 ease-out",leave:"transition-all duration-200 ease-in",enterFrom:"opacity-0 -translate-x-4",enterTo:"opacity-100 translate-x-0",leaveFrom:"opacity-100 translate-x-0",leaveTo:"opacity-0 -translate-x-4"})),E=b(null),p=b(""),f=b(!1),P=v(()=>p.value?C.value.filter(s=>s.chatName.toLowerCase().includes(p.value.toLowerCase())):C.value);function q(){p.value||(f.value=!1)}return(s,c)=>{const n=ee,i=te,m=ae,j=oe,V=ne,A=re,M=se,U=le;return _(),x("div",{class:g(["slidebar shadow-lg overflow-hidden",[a(F)?"w-240px":"w-0"]])},[r("div",me,[r("div",ve,[r("div",xe,[e(n,{size:"24",class:"text-primary-500"},{default:t(()=>[e(a(Z))]),_:1}),r("span",ge,h(s.$t("chat.historyChat")),1)]),e(i,{quaternary:"",circle:"",class:"text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200 transition-colors",onClick:L},{icon:t(()=>[e(n,null,{default:t(()=>[e(a(ie))]),_:1})]),_:1})]),r("div",ye,[e(i,{type:"primary",size:"small",class:g(["flex-1 px-6 rounded-lg transition-margin duration-300 hover:opacity-90",{"-ml-full":a(f),"ml-0":!a(f)}]),onClick:O},{default:t(()=>[y(h(s.$t("chat.createChat")),1)]),_:1},8,["class"]),e(m,{ref_key:"searchInputRef",ref:E,value:a(p),"onUpdate:value":c[0]||(c[0]=o=>G(p)?p.value=o:null),type:"text",size:"small",placeholder:"搜索对话",class:g(["search-input transition-width duration-300 rounded-lg cursor-pointer",{"w-full!":a(f),"w-36px!":!a(f)}]),onFocus:c[1]||(c[1]=o=>f.value=!0),onBlur:q},{prefix:t(()=>[e(n,null,{default:t(()=>[e(a(ue))]),_:1})]),_:1},8,["value","class"])]),e(M,{class:"flex-1"},{default:t(()=>[a(C).length?Q("",!0):(_(),x("div",Ce,[e(j,{class:"animate-fade-in",description:s.$t("chat.noChats")},{icon:t(()=>[r("div",be,[e(n,null,{default:t(()=>[e(a(pe))]),_:1})])]),_:1},8,["description"])])),r("div",ke,[e(H,{"enter-active-class":a(u).enter,"leave-active-class":a(u).leave,"enter-from-class":a(u).enterFrom,"enter-to-class":a(u).enterTo,"leave-from-class":a(u).leaveFrom,"leave-to-class":a(u).leaveTo},{default:t(()=>[(_(!0),x(W,null,X(a(P),o=>(_(),x("div",{key:o.chatId},[o.isEdit?(_(),S(m,{key:0,value:o.chatName,"onUpdate:value":d=>o.chatName=d,size:"large",class:"h-10 rounded-lg"},{suffix:t(()=>[r("div",we,[e(i,{quaternary:"",circle:"",size:"small",class:"hover:text-primary-600 transition-colors",onClick:d=>w(o,!1,d)},{icon:t(()=>[e(n,null,{default:t(()=>[e(a(_e))]),_:1})]),_:2},1032,["onClick"]),e(i,{quaternary:"",circle:"",size:"small",class:"hover:text-gray-600 transition-colors",onClick:d=>o.isEdit=!1},{icon:t(()=>[e(n,null,{default:t(()=>[e(a(T))]),_:1})]),_:2},1032,["onClick"])])]),_:2},1032,["value","onUpdate:value"])):(_(),S(i,{key:1,block:"",text:"",class:g(["h-10 justify-start rounded-lg transition-all duration-300 hover:bg-primary/8 hover:transform hover:translate-x-1 dark:hover:bg-gray-800/80 group",N(o.chatId)&&"bg-primary/12 text-primary-600 shadow-sm"]),onClick:d=>$(o)},{default:t(()=>[r("div",Ne,[e(n,{size:"18",class:"flex-none"},{default:t(()=>[e(a(ce))]),_:1}),r("div",Se,[e(V,{tooltip:!1,class:"text-[14px] font-medium w-full"},{default:t(()=>[y(h(o.chatName),1)]),_:2},1024)]),r("div",Te,[e(i,{quaternary:"",circle:"",size:"small",class:"hover:text-primary-600 transition-colors",onClick:d=>w(o,!0,d)},{icon:t(()=>[e(n,null,{default:t(()=>[e(a(fe))]),_:1})]),_:2},1032,["onClick"]),e(A,{placement:"top",onPositiveClick:d=>B(o,d)},{trigger:t(()=>[e(i,{quaternary:"",circle:"",size:"small",class:"hover:text-error transition-colors"},{icon:t(()=>[e(n,null,{default:t(()=>[e(a(T))]),_:1})]),_:1})]),default:t(()=>[y(" "+h(s.$t("chat.removeConfirm")),1)]),_:2},1032,["onPositiveClick"])])])]),_:2},1032,["class","onClick"]))]))),128))]),_:1},8,["enter-active-class","leave-active-class","enter-from-class","enter-to-class","leave-from-class","leave-to-class"])])]),_:1}),r("div",ze,[e(U,{placement:"top"},{trigger:t(()=>[e(i,{circle:"",class:"h-8 rounded-xl font-medium transition-all duration-300 transform hover:-translate-y-0.5 shadow hover:shadow-lg",onClick:I},{icon:t(()=>[e(n,{class:"text-[18px]"},{default:t(()=>[e(a(de))]),_:1})]),_:1})]),default:t(()=>[y(" "+h(s.$t("chat.clearChat")),1)]),_:1})])])],2)}}}),Me=he(Fe,[["__scopeId","data-v-c31c3145"]]);export{Me as default};
