import{c as F}from"./index-DqO_OEbo.js";import{u as E}from"./api-9ESawQ3Y.js";import{p as I,B as S,N as j,a7 as L,a9 as O,m as A,L as D}from"./ui-vendor-D13i6_Ys.js";import{C as w,a as U}from"./CloseOutline-CVAvdo38.js";import{k as Q,e as h,r as T,W as m,X as r,U as s,_ as n,Y as i,Z as y,Q as u,F as v,a4 as W,$,a3 as X,j as d}from"./vue-vendor-Zc8KthId.js";import"./utils-vendor-lGwZSMVs.js";const Y={class:"p-4"},Z={class:"flex items-center mb-6"},G={class:"flex-1 items-center justify-start"},H={class:"w-100px"},J={class:"flex-1"},K={class:"mr-4"},M={key:2,class:"w-50% flex items-center"},oe=Q({__name:"index",setup(P){const x=F(),{userInfo:l}=x,B=[{key:"username",label:"用户名"},{key:"nickname",label:"昵称"},{key:"phone",label:"手机号"},{key:"email",label:"邮箱"},{key:"sex",label:"性别"},{key:"remark",label:"备注"}],_=h({avatar:!1,username:!1,nickname:!1,phone:!1,email:!1,sex:!1,remark:!1}),o=h({avatar:"",username:"",nickname:"",phone:"",email:"",sex:"",remark:""});T([]);const N=t=>{_[t]=!0,o[t]=l[t]},f=async t=>{l[t]=o[t],_[t]=!1;try{const{success:a}=await E({id:l.id,[t]:o[t]});if($message.success("更新成功"),await x.getUserInfo(),!a)return $message.error("更新失败")}catch(a){console.error(a)}},C=t=>{_[t]=!1,o[t]=l[t]};return(t,a)=>{const z=I,k=j,p=S,g=O,V=L,b=A,q=D;return r(),m("div",Y,[s(q,{title:"个人信息",class:"mx-auto"},{default:n(()=>[i("div",Z,[a[4]||(a[4]=i("span",{class:"w-100px"},"头像",-1)),i("div",G,[_.avatar?(r(),m(v,{key:2},[s(p,{quaternary:"",circle:"",size:"small",class:"hover:text-primary-600 transition-colors",onClick:a[1]||(a[1]=e=>f("avatar"))},{icon:n(()=>[s(k,null,{default:n(()=>[s(u(w))]),_:1})]),_:1}),s(p,{quaternary:"",circle:"",size:"small",class:"hover:text-error transition-colors",onClick:a[2]||(a[2]=e=>C("avatar"))},{icon:n(()=>[s(k,null,{default:n(()=>[s(u(U))]),_:1})]),_:1})],64)):(r(),y(z,{key:0,src:u(l).avatar,size:64,class:"mr-4"},null,8,["src"]))])]),(r(),m(v,null,W(B,e=>i("div",{key:e.key,class:"flex items-center mb-4"},[i("span",H,$(e.label),1),i("div",J,[_[e.key]?(r(),m(v,{key:1},[e.key==="sex"?(r(),y(V,{key:0,value:o[e.key],"onUpdate:value":c=>o[e.key]=c},{default:n(()=>[s(g,{value:"male"},{default:n(()=>a[6]||(a[6]=[d("男")])),_:1}),s(g,{value:"female"},{default:n(()=>a[7]||(a[7]=[d("女")])),_:1})]),_:2},1032,["value","onUpdate:value"])):e.key==="remark"?(r(),y(b,{key:1,value:o[e.key],"onUpdate:value":c=>o[e.key]=c,type:"textarea",rows:3,class:"w-300px mr-4"},null,8,["value","onUpdate:value"])):(r(),m("div",M,[s(b,{value:o[e.key],"onUpdate:value":c=>o[e.key]=c,class:"w-200px mr-2"},null,8,["value","onUpdate:value"]),s(p,{quaternary:"",circle:"",size:"small",class:"hover:text-primary-600 transition-colors",onClick:c=>f(e.key)},{icon:n(()=>[s(k,null,{default:n(()=>[s(u(w))]),_:1})]),_:2},1032,["onClick"]),s(p,{quaternary:"",circle:"",size:"small",class:"hover:text-error transition-colors",onClick:c=>C(e.key)},{icon:n(()=>[s(k,null,{default:n(()=>[s(u(U))]),_:1})]),_:2},1032,["onClick"])]))],64)):(r(),m(v,{key:0},[i("span",K,$(u(l)[e.key]),1),u(l)[e.key]!==void 0&&u(l)[e.key]!==null?(r(),y(p,{key:0,text:"",type:"primary",onClick:c=>N(e.key)},{default:n(()=>a[5]||(a[5]=[d(" 修改 ")])),_:2},1032,["onClick"])):X("",!0)],64))])])),64))]),_:1})])}}});export{oe as default};
