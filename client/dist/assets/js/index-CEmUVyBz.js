import{_ as z,g as B,d as L}from"./edit-role-modal.vue_vue_type_script_setup_true_lang-mFGKn04B.js";import{L as b,V as T,f as u,W as c,m as w,j as V,B as d,a2 as $}from"./ui-vendor-D13i6_Ys.js";import{k as j,r as p,e as x,o as M,Z as h,X as D,_ as t,U as e,Q as a,j as v,m as _}from"./vue-vendor-Zc8KthId.js";import"./index-DqO_OEbo.js";import"./utils-vendor-lGwZSMVs.js";const W=j({__name:"index",setup(q){const f=p(!1),m=p(),g=p(!1),y={code:void 0,name:void 0,status:void 0},o=x(y),r=x({pageNumber:1,pageSize:10,total:0}),k=p([]),C=[{title:"角色编码",key:"code"},{title:"角色名称",key:"name"},{title:"排序",key:"sort"},{title:"状态",key:"status",render:n=>n.status===1?"启用":"禁用"},{title:"备注",key:"remark"},{title:"创建时间",key:"createTime"},{title:"操作",key:"actions",render:n=>_(u,{},{default:()=>[_(d,{size:"small",type:"primary",onClick:()=>S(n)},{default:()=>"编辑"}),_(d,{size:"small",type:"error",onClick:()=>R(n)},{default:()=>"删除"})]})}];async function i(){f.value=!0;try{const{data:n}=await B({pageNumber:r.pageNumber,pageSize:r.pageSize,...o});k.value=n.list,r.total=n.total}finally{f.value=!1}}function N(){m.value?.openModal("add")}function S(n){m.value?.openModal("edit",n)}async function R(n){try{await window.$dialog.warning({title:"警告",content:"确定要删除该角色吗?",positiveText:"确定",negativeText:"取消",onPositiveClick:async()=>{await L(n.id),$message.success("删除成功"),i()}})}catch{$message.error("删除失败")}}function U(){Object.assign(o,y),i()}return M(()=>{i()}),(n,l)=>(D(),h(a(u),{vertical:""},{default:t(()=>[e(a(b),null,{default:t(()=>[e(a(T),{ref:"formRef",model:o,"label-placement":"left",inline:"","show-feedback":!1},{default:t(()=>[e(a(u),null,{default:t(()=>[e(a(c),{label:"角色编码",path:"code"},{default:t(()=>[e(a(w),{value:o.code,"onUpdate:value":l[0]||(l[0]=s=>o.code=s),placeholder:"请输入"},null,8,["value"])]),_:1}),e(a(c),{label:"角色名称",path:"name"},{default:t(()=>[e(a(w),{value:o.name,"onUpdate:value":l[1]||(l[1]=s=>o.name=s),placeholder:"请输入"},null,8,["value"])]),_:1}),e(a(c),{label:"状态",path:"status"},{default:t(()=>[e(a(V),{class:"w-100px",value:o.status,"onUpdate:value":l[2]||(l[2]=s=>o.status=s),options:[{label:"启用",value:1},{label:"禁用",value:0}],"label-field":"label","value-field":"value",placeholder:"请选择",clearable:""},null,8,["value"])]),_:1}),e(a(u),null,{default:t(()=>[e(a(d),{type:"primary",onClick:i},{default:t(()=>l[4]||(l[4]=[v("查询 ")])),_:1}),e(a(d),{onClick:U},{default:t(()=>l[5]||(l[5]=[v("重置")])),_:1})]),_:1})]),_:1})]),_:1},8,["model"])]),_:1}),e(a(b),null,{default:t(()=>[e(a(u),{vertical:""},{default:t(()=>[e(a(d),{type:"primary",onClick:N},{default:t(()=>l[6]||(l[6]=[v("新增角色")])),_:1}),e(a($),{columns:C,data:k.value,loading:f.value,pagination:r,"onUpdate:page":i},null,8,["data","loading","pagination"])]),_:1})]),_:1}),e(z,{ref_key:"modalRef",ref:m,visible:g.value,"onUpdate:visible":l[3]||(l[3]=s=>g.value=s),onSuccess:i},null,8,["visible"])]),_:1}))}});export{W as default};
