import{g as k,h as g}from"./utils-vendor-lGwZSMVs.js";import{r as v,a as y,M as _,H as l}from"./markdown-vendor-CzFv58Rk.js";import{k as b,r as w,c as C,o as E,ag as L,G as B,W as n,X as a,a3 as M,Q as m,$ as A}from"./vue-vendor-Zc8KthId.js";var I=v();const S=k(I);var q=y();const H=k(q),K=["innerHTML"],T=["textContent"],$={key:2,class:"w-4px h-20px block animate-blink"},j=b({__name:"text",props:{text:{},loading:{type:Boolean},type:{}},setup(x){const r=x,{copy:h}=g({}),o=w(),s=new _({html:!1,linkify:!0,highlight(e,t){if(!!(t&&l.getLanguage(t))){const u=t??"";return d(l.highlight(e,{language:u}).value,u)}return d(l.highlightAuto(e).value,"")}});s.use(H,{attrs:{target:"_blank",rel:"noopener"}}),s.use(S,{blockClass:"katexmath-block rounded-md p-10px",errorColor:" #cc0000"});const i=C(()=>{const e=r.text??"";return r.type==="markdown"?s.render(e):e});function d(e,t){return`
		<pre class="code-block-content relative">
			<button class="code-block-header__copy absolute top-4 right-4 z-100 bg-transparent p-1 text-xs text-white">复制代码</button>
			<code class="${t}">${e}</code>
		</pre>
	`}function p(){o.value&&o.value.querySelectorAll(".code-block-header__copy").forEach(t=>{t.addEventListener("click",()=>{const c=t?.nextElementSibling?.textContent;c&&h(c).then(()=>{t.textContent="复制成功",setTimeout(()=>{t.textContent="复制代码"},1e3)})})})}function f(){o.value&&o.value.querySelectorAll(".code-block-header__copy").forEach(t=>{t.removeEventListener("click",()=>{})})}return E(()=>{p()}),L(()=>{p()}),B(()=>{f()}),(e,t)=>(a(),n("div",{ref_key:"textRef",ref:o,class:"flex-1 w-auto max-w-full text-sm dark:prose-invert md:text-base"},[r.type==="markdown"?(a(),n("div",{key:0,class:"prose max-w-full",innerHTML:m(i)},null,8,K)):(a(),n("div",{key:1,textContent:A(m(i))},null,8,T)),e.loading?(a(),n("span",$)):M("",!0)],512))}});export{j as _};
