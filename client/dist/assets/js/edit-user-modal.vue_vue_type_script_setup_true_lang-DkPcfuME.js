import{e as y}from"./index-DqO_OEbo.js";import{u as D,c as O}from"./api-9ESawQ3Y.js";import{n as Q,a5 as X,a6 as Z,m as z,a7 as A,f as E,a8 as G,V as H,B as I}from"./ui-vendor-D13i6_Ys.js";import{k as J,x as K,c as P,r as x,Z as W,X as Y,Q as o,O as ee,_ as t,U as n,j as d}from"./vue-vendor-Zc8KthId.js";const se=J({__name:"edit-user-modal",props:{title:{default:""}},emits:["open","close"],setup(k,{expose:U,emit:M}){const $=k,_=M,{bool:p,setTrue:B,setFalse:T}=y(!1),{bool:C,setTrue:R,setFalse:c}=y(!1),i=K("add"),V=P(()=>`${{add:"添加",view:"查看",edit:"编辑"}[i.value]}${$.title}`),L={username:{required:!0,message:"请输入用户名",trigger:"blur"}},f={username:"",sex:void 0,email:"",phone:""},a=x({...f});async function N(l="add",e){_("open"),i.value=l,B(),await{async add(){a.value={...f}},async view(){e&&(a.value={...e})},async edit(){e&&(a.value={...e})}}[l]()}function m(){T(),c(),_("close")}U({openModal:N});const v=x();async function h(){const l={async add(){const{success:e}=await O(a.value);e&&($message.success("用户创建成功"),m())},async edit(){const{success:e}=await D(a.value);e&&($message.success("用户更新成功"),m())},async view(){return!0}};try{await v.value?.validate(),R(),await l[i.value]()}catch(e){console.error(e)}finally{c()}}return(l,e)=>{const u=z,r=Z,g=G,b=E,j=A,F=X,S=H,w=I,q=Q;return Y(),W(q,{show:o(p),"onUpdate:show":e[5]||(e[5]=s=>ee(p)?p.value=s:null),"mask-closable":!1,preset:"card",title:o(V),class:"w-700px",segmented:{content:!0,action:!0}},{action:t(()=>[n(b,{justify:"center"},{default:t(()=>[n(w,{onClick:m},{default:t(()=>e[8]||(e[8]=[d(" 取消 ")])),_:1}),n(w,{type:"primary",loading:o(C),onClick:h},{default:t(()=>e[9]||(e[9]=[d(" 提交 ")])),_:1},8,["loading"])]),_:1})]),default:t(()=>[n(S,{ref_key:"formRef",ref:v,rules:L,"label-placement":"left",model:o(a),"label-width":100,disabled:o(i)==="view"},{default:t(()=>[n(F,{cols:2,"x-gap":18},{default:t(()=>[n(r,{span:1,label:"用户名",path:"username"},{default:t(()=>[n(u,{value:o(a).username,"onUpdate:value":e[0]||(e[0]=s=>o(a).username=s)},null,8,["value"])]),_:1}),n(r,{span:1,label:"性别",path:"sex"},{default:t(()=>[n(j,{value:o(a).sex,"onUpdate:value":e[1]||(e[1]=s=>o(a).sex=s)},{default:t(()=>[n(b,null,{default:t(()=>[n(g,{value:"0"},{default:t(()=>e[6]||(e[6]=[d(" 男 ")])),_:1}),n(g,{value:"1"},{default:t(()=>e[7]||(e[7]=[d(" 女 ")])),_:1})]),_:1})]),_:1},8,["value"])]),_:1}),n(r,{span:1,label:"联系方式",path:"phone"},{default:t(()=>[n(u,{value:o(a).phone,"onUpdate:value":e[2]||(e[2]=s=>o(a).phone=s)},null,8,["value"])]),_:1}),n(r,{span:1,label:"邮箱",path:"email"},{default:t(()=>[n(u,{value:o(a).email,"onUpdate:value":e[3]||(e[3]=s=>o(a).email=s)},null,8,["value"])]),_:1}),n(r,{span:2,label:"备注",path:"remark"},{default:t(()=>[n(u,{value:o(a).remark,"onUpdate:value":e[4]||(e[4]=s=>o(a).remark=s),type:"textarea"},null,8,["value"])]),_:1})]),_:1})]),_:1},8,["model","disabled"])]),_:1},8,["show","title"])}}});export{se as _};
