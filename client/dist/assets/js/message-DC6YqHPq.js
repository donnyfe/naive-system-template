import{u as j,b as z}from"./index-DqO_OEbo.js";import{_ as I}from"./avatar.vue_vue_type_script_setup_true_lang-TLNQv2B_.js";import{_ as T}from"./text.vue_vue_type_style_index_0_lang-6eBzAczY.js";import{G as V,f as A,U as S,B as q,N as E,L as H}from"./ui-vendor-D13i6_Ys.js";import{k as _,W as u,X as l,Y as n,r as d,U as t,_ as o,Z as v,a3 as O,$ as b,Q as c,H as U}from"./vue-vendor-Zc8KthId.js";import"./utils-vendor-lGwZSMVs.js";import"./markdown-vendor-CzFv58Rk.js";async function D(a){return new Promise((i,e)=>{try{const s=document.createElement("textarea");s.setAttribute("readonly","readonly"),s.value=a,document.body.appendChild(s),s.select(),document.execCommand("copy")&&document.execCommand("copy"),document.body.removeChild(s),i(a)}catch(s){e(s)}})}const F={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 512 512"},G=_({name:"CopyOutline",render:function(i,e){return l(),u("svg",F,e[0]||(e[0]=[n("rect",{x:"128",y:"128",width:"336",height:"336",rx:"57",ry:"57",fill:"none",stroke:"currentColor","stroke-linejoin":"round","stroke-width":"32"},null,-1),n("path",{d:"M383.5 128l.5-24a56.16 56.16 0 0 0-56-56H112a64.19 64.19 0 0 0-64 64v216a56.16 56.16 0 0 0 56 56h24",fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"32"},null,-1)]))}}),L={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 512 512"},P=_({name:"Refresh",render:function(i,e){return l(),u("svg",L,e[0]||(e[0]=[n("path",{d:"M320 146s24.36-12-64-12a160 160 0 1 0 160 160",fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-miterlimit":"10","stroke-width":"32"},null,-1),n("path",{fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"32",d:"M256 58l80 80l-80 80"},null,-1)]))}}),Q={class:"w-full flex justify-start px-4 sm:px-8 py-3 mb-4"},W={class:"w-8 h-8 sm:w-10 sm:h-10 mr-3 sm:mr-4 flex-shrink-0"},X={class:"text-gray-400 text-sm"},Y={key:2,class:"action-buttons absolute -bottom-8 right-0"},Z={class:"text-xs"},J=_({__name:"message",props:{item:{},loading:{type:Boolean}},emits:["regenerate"],setup(a,{emit:i}){const e=a,s=i,{t:f}=j(),g=V(),C=d(),y=d(),p=d(e.item.sender==="assistant"),h=d(!1);function B(){y.value?.scrollIntoView(),s("regenerate",e.item)}async function $(){try{await D(e.item?.messageText||""),g.success(f("common.copySuccess"))}catch{g.error(f("common.copyFailed"))}}return(r,m)=>{const M=S,x=A,w=E,k=q,R=H;return l(),u("div",{ref_key:"messageRef",ref:y,class:"message w-full transition-all"},[n("div",Q,[n("div",W,[t(I,{visible:"",type:r.item.sender==="assistant"?"assistant":"user"},null,8,["type"])]),n("div",{class:"flex-grow max-w-[85%]",onMouseenter:m[0]||(m[0]=N=>h.value=!0),onMouseleave:m[1]||(m[1]=N=>h.value=!1)},[t(R,{bordered:!1,class:U(["message-bubble relative rounded-xl shadow-sm",[c(p)?"bg-gray-50 dark:bg-gray-800":"bg-primary-50 dark:bg-primary-900"]])},{default:o(()=>[r.item.messageText?(l(),v(T,{key:1,ref_key:"textRef",ref:C,type:c(p)?"markdown":"text",text:r.item?.messageText,loading:r.loading},null,8,["type","text","loading"])):(l(),v(x,{key:0,align:"center",class:"px-1"},{default:o(()=>[t(M,{size:"small"}),n("span",X,b(r.$t("chat.thinking")),1)]),_:1})),c(p)&&!r.loading?(l(),u("div",Y,[t(x,null,{default:o(()=>[t(k,{size:"tiny",quaternary:"",class:"!text-gray-500 hover:!text-primary",onClick:B},{icon:o(()=>[t(w,null,{default:o(()=>[t(c(P))]),_:1})]),default:o(()=>[n("span",Z,b(r.$t("chat.regenerate")),1)]),_:1}),t(k,{size:"tiny",quaternary:"",class:"!text-gray-500 hover:!text-primary",onClick:$},{icon:o(()=>[t(w,null,{default:o(()=>[t(c(G))]),_:1})]),_:1})]),_:1})])):O("",!0)]),_:1},8,["class"])],32)])],512)}}}),ae=z(J,[["__scopeId","data-v-592b2765"]]);export{ae as default};
