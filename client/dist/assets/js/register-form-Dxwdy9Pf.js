import{u as A,c as O,b as T}from"./index-DqO_OEbo.js";import{u as P,U as j}from"./hooks-B211TLK2.js";import{L as D}from"./LockOutlined-v1xK1X82.js";import{k as $,W as H,X as N,Y as m,r as d,e as L,G as M,U as e,_ as t,j as u,$ as i,Q as a,H as U}from"./vue-vendor-Zc8KthId.js";import{a0 as W,V as q,W as E,m as G,N as Q,B as X,a1 as Y}from"./ui-vendor-D13i6_Ys.js";import{k as J}from"./utils-vendor-lGwZSMVs.js";const K={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 1024 1024"},Z=$({name:"NumberOutlined",render:function(y,p){return N(),H("svg",K,p[0]||(p[0]=[m("path",{d:"M872 394c4.4 0 8-3.6 8-8v-60c0-4.4-3.6-8-8-8H708V152c0-4.4-3.6-8-8-8h-64c-4.4 0-8 3.6-8 8v166H400V152c0-4.4-3.6-8-8-8h-64c-4.4 0-8 3.6-8 8v166H152c-4.4 0-8 3.6-8 8v60c0 4.4 3.6 8 8 8h168v236H152c-4.4 0-8 3.6-8 8v60c0 4.4 3.6 8 8 8h168v166c0 4.4 3.6 8 8 8h64c4.4 0 8-3.6 8-8V706h228v166c0 4.4 3.6 8 8 8h64c4.4 0 8-3.6 8-8V706h164c4.4 0 8-3.6 8-8v-60c0-4.4-3.6-8-8-8H708V394h164zM628 630H400V394h228v236z",fill:"currentColor"},null,-1)]))}}),ee={class:"register-form login-modal-form"},te={class:"w-full h-full flex flex-row justify-between items-center"},ae={class:"w-120px h-full items-center ml-4"},le={class:"text-white"},oe={class:"mt-4 text-center text-white"},se=$({__name:"register-form",emits:["update:modelValue"],setup(F,{emit:y}){const p=y,{t:l}=A(),V=O(),v=d(),g=d(!1),h=d(!1),s=L({email:"",password:"",captcha:""}),I=P(s),n=d(0),_=d();async function B(){if(!h.value){$message.warning(l("login.agreementRequired"));return}try{await v.value.validate(),g.value=!0;const{email:r,password:o}=s;(await V.register(r,o)).success&&($message.success(l("login.registerSuccess")),b("loginForm"))}finally{g.value=!1}}function b(r){p("update:modelValue",r)}const R=J(async()=>{if(!(n.value>0))try{await v.value.validate(r=>{},r=>r.key==="email"),$message.success(l("login.captchaSent")),n.value=60,_.value=setInterval(()=>{n.value--,n.value<=0&&clearInterval(_.value)},1e3),await V.getVerifyCode({email:s.email})}catch{$message.error(l("login.emailFormatTip"))}},2e3);return M(()=>{_.value&&clearInterval(_.value)}),(r,o)=>{const C=W,w=Q,x=G,k=E,f=X,S=Y,z=q;return N(),H("div",ee,[e(C,{class:"form-title"},{default:t(()=>[u(i(a(l)("login.registerTitle")),1)]),_:1}),e(z,{ref_key:"formRef",ref:v,model:s,rules:a(I),size:"large"},{default:t(()=>[e(k,{path:"email"},{default:t(()=>[e(x,{value:s.email,"onUpdate:value":o[0]||(o[0]=c=>s.email=c),placeholder:a(l)("login.emailPlaceholder")},{prefix:t(()=>[e(w,null,{default:t(()=>[e(a(j))]),_:1})]),_:1},8,["value","placeholder"])]),_:1}),e(k,{path:"password"},{default:t(()=>[e(x,{value:s.password,"onUpdate:value":o[1]||(o[1]=c=>s.password=c),type:"password","show-password-on":"click",placeholder:a(l)("login.passwordPlaceholder")},{prefix:t(()=>[e(w,null,{default:t(()=>[e(a(D))]),_:1})]),_:1},8,["value","placeholder"])]),_:1}),e(k,{path:"captcha"},{default:t(()=>[m("div",te,[e(x,{class:"flex-1",value:s.captcha,"onUpdate:value":o[2]||(o[2]=c=>s.captcha=c),placeholder:a(l)("login.captchaPlaceholder"),maxlength:6},{prefix:t(()=>[e(w,null,{default:t(()=>[e(a(Z))]),_:1})]),_:1},8,["value","placeholder"]),m("div",ae,[e(f,{class:"w-120px h-44px",type:"primary",disabled:n.value>0,loading:n.value>0,onClick:a(R)},{default:t(()=>[u(i(n.value>0?`${n.value}s`:a(l)("login.getCaptcha")),1)]),_:1},8,["disabled","loading","onClick"])])])]),_:1}),e(S,{checked:h.value,"onUpdate:checked":o[3]||(o[3]=c=>h.value=c),class:"mb-4 items-center"},{default:t(()=>[m("span",le,i(a(l)("login.readAndAgree")),1),e(f,{text:"",class:U(["text-[var(--n-text-color-pressed)]"])},{default:t(()=>[u(i(a(l)("login.userAgreement")),1)]),_:1})]),_:1},8,["checked"]),e(f,{class:"text-white rounded-lg",block:"",type:"primary",size:"large",loading:g.value,onClick:B},{default:t(()=>[u(i(a(l)("login.signUp")),1)]),_:1},8,["loading"]),m("div",oe,[u(i(a(l)("login.haveAccountText"))+" ",1),e(f,{text:"",class:U(["text-[var(--n-text-color-pressed)]"]),onClick:o[4]||(o[4]=c=>b("loginForm"))},{default:t(()=>[u(i(a(l)("login.signIn")),1)]),_:1})])]),_:1},8,["model","rules"])])}}}),me=T(se,[["__scopeId","data-v-d57af5fe"]]);export{me as default};
