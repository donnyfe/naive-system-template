import{p as h,e as C}from"./ai-vendor-B19eXN3d.js";import{A as v}from"./ArchiveOutline-r281DOBm.js";import{k as y,r as p,Z as w,X as E,_ as a,U as s,j as m,Y as u,Q as F}from"./vue-vendor-Zc8KthId.js";import{Z as N,L as k,X as L,Y as U,N as A,b as B}from"./ui-vendor-D13i6_Ys.js";import{b as I}from"./index-DqO_OEbo.js";import"./utils-vendor-lGwZSMVs.js";const $={class:"mt-12px"},j=y({__name:"index",setup(R){C.allowLocalModels=!1;const i=p(),_=p();async function f(o){_.value.textContent="分析中...";const t=await h("object-detection","Xenova/detr-resnet-50");console.time("图像识别耗时:");const n=await t(o.src,{threshold:.1,percentage:!0});_.value.textContent="分析完成！",console.timeEnd("图像识别耗时:"),n.forEach(e=>x(e))}function x({box:o,label:t}){const{xmax:n,xmin:e,ymax:l,ymin:d}=o,r=document.createElement("div");r.className="bounding-box",Object.assign(r.style,{position:"absolute",left:`${100*e}%`,top:`${100*d}%`,width:`${100*(n-e)}%`,height:`${100*(l-d)}%`,borderWidth:"1px",borderStyle:"solid",borderColor:"#FF0000"}),i.value.appendChild(r);const c=document.createElement("span");c.textContent=t,c.className="bounding-box-label",c.style.backgroundColor="#FF0000",r.appendChild(c),i.value.appendChild(r)}async function g(o){const t=o.fileList[0].file;try{const n=await b(t),e=new Image;e.src=n,e.onload=()=>{i.value.appendChild(e),f(e)}}catch(n){console.error("Error reading file:",n)}}function b(o){return new Promise((t,n)=>{const e=new FileReader;e.onload=l=>t(l.target?.result),e.onerror=l=>n(l),e.readAsDataURL(o)})}return(o,t)=>{const n=N,e=k,l=A,d=U,r=L,c=B;return E(),w(c,null,{default:a(()=>[s(n,null,{default:a(()=>t[0]||(t[0]=[m(" 备注：加载模型库需要科学上网 ")])),_:1}),s(e,{title:"示例"},{default:a(()=>[u("div",{ref_key:"imageContaienr",ref:i,class:"img-container"},[u("p",{ref_key:"status",ref:_,class:"status"},null,512)],512)]),_:1}),s(e,{title:"图像上传"},{default:a(()=>[s(r,{multiple:"","directory-dnd":"",max:5,"default-upload":!1,onChange:g},{default:a(()=>[s(d,null,{default:a(()=>[u("div",$,[s(l,{size:"48",depth:3},{default:a(()=>[s(F(v))]),_:1})]),s(n,null,{default:a(()=>t[1]||(t[1]=[m(" 点击或者拖动文件到该区域来上传 ")])),_:1})]),_:1})]),_:1})]),_:1})]),_:1})}}}),M=I(j,[["__scopeId","data-v-52341732"]]);export{M as default};
